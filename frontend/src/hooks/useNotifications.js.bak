import { useEffect } from "react";
import { io } from "socket.io-client";
import { BASE_URL } from "../lib/api";

export function useNotifications() {
    useEffect(() => {
        const s = io(BASE_URL.replace(/\/api$/, ""), {
            withCredentials: true,
            auth: { token: localStorage.getItem("token") },
        });
        s.on("notify", (payload) => alert(payload.message));
        return () => s.disconnect();
    }, []);
}
