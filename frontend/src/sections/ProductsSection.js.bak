import { api, API } from "../lib/api";
import { useProducts } from "../hooks/useProducts";

export default function ProductsSection() {
    const { data, loading, error } = useProducts({ limit: 12 });

    if (loading) return <div className="grid">Loading…</div>;
    if (error) return <div>Eroare: {error}</div>;
    if (!data?.length) return <div>Nu sunt produse.</div>;

    return (
        <section id="produse" className="container">
            <h2 className="section-title">Colecții & Produse</h2>
            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                {data.map((p) => (
                    <article key={p._id} className="card">
                        <img src={p.images?.[0]} alt={p.title} className="w-full h-48 object-cover rounded-xl" />
                        <div className="p-3">
                            <h3 className="font-medium">{p.title}</h3>
                            <p className="opacity-70 text-sm">{p.shortDesc}</p>
                            <div className="mt-2 font-semibold">{p.price} MDL</div>
                        </div>
                    </article>
                ))}
            </div>
        </section>
    );
}
